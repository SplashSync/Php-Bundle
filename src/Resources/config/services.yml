services:

    ########################################################################
    #   CONNECTORS MANAGER
    ########################################################################
    splash.connectors.manager:
        class: Splash\Bundle\Services\ConnectorsManager
        lazy:   false
        public: true
        arguments:
            -   "@=service('service_container').getParameter('splash')"
            -   !tagged "splash.connector"
            -   "@session"
            -   "@?security.authorization_checker"
        tags:
            - { name: kernel.event_listener, event: splash.connectors.commit,   method: onCommitEvent,  priority: 100 }   
            - { name: kernel.event_listener, event: splash.connectors.file,     method: onGetFileEvent, priority: 100 }   
            - { name: kernel.event_listener, event: splash.connectors.identify, method: onIdentifyEvent,priority: 100}   
            - { name: kernel.event_listener, event: splash.connectors.update,   method: onUpdateEvent,  priority: 100}   

    ########################################################################
    #   CONNECTORS CONSOLE COMMANDS
    ########################################################################
    
    Splash\Bundle\Command\:
        resource: '../../Command'
        arguments:  [ "@event_dispatcher", "@logger" ]
        tags:       
            - { name: "console.command"}

    ################################################################################
    # Standalone Connector
    ################################################################################
    splash.connectors.standalone:
        class:      Splash\Bundle\Connectors\Standalone
        tags:       [ "splash.connector" ]
        arguments: 
            -   "@event_dispatcher"  
            -   "@logger"
        public:     true
        calls:
            - [ setContainer, [ "@service_container" ]]

    splash.connectors.standalone.form:
        class:      Splash\Bundle\Form\StandaloneFormType
        arguments:  [ "@event_dispatcher" ]
        public:     true
        tags:
            - { name: form.type }

    splash.connectors.standalone.widget.selftest:
        class:      Splash\Bundle\Templates\Widgets\SelfTestTemplate
        public:     true
        tags:
            - { name: "splash.standalone.widget", type : "selftest" }
        